(window.webpackJsonpvideoplayer=window.webpackJsonpvideoplayer||[]).push([[0],{282:function(e,t,a){e.exports=a(504)},292:function(e,t,a){},293:function(e,t,a){},500:function(e,t,a){},501:function(e,t,a){},502:function(e,t,a){},504:function(e,t,a){"use strict";a.r(t);var i,n=a(0),r=a.n(n),s=a(37),o=a.n(s),l=(a(292),a(21)),c=a(22),p=a(29),h=a(26),d=a(28),u=(a(293),a(9)),m=a(17),g=a(23),y=Object(g.b)("store")(Object(g.c)(function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).savePlayList=a.savePlayList.bind(Object(m.a)(a)),a.state={code:"",showShareDialog:!1,copied:!1},a.showShareDialog=a.showShareDialog.bind(Object(m.a)(a)),a.closeShareDialog=a.closeShareDialog.bind(Object(m.a)(a)),a.onCopy=a.onCopy.bind(Object(m.a)(a)),a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"savePlayList",value:function(){this.props.store.savePlayList()}},{key:"showShareDialog",value:function(){this.setState({code:"<div id='react-clipper' video-url='"+this.props.url+"' readonly='true' data-playlist='"+JSON.stringify(this.props.store.clips.toJS())+"' />",showShareDialog:!0})}},{key:"closeShareDialog",value:function(){this.setState({showShareDialog:!1})}},{key:"onCopy",value:function(){var e=this,t=this.refs.inputcopy.inputRef;t.value=this.state.code,t.select(),this.setState({copied:!0}),setTimeout(function(){e.setState({copied:!1})},5e3),document.execCommand("Copy")}},{key:"render",value:function(){return r.a.createElement(u.n,{inverted:!0,clearing:!0},r.a.createElement(u.g,{as:"h4",floated:"left",inverted:!0,color:"blue"},r.a.createElement(u.h,{fitted:!0,name:"video"}),"Clipper"),this.props.store.readonly.get()?"":r.a.createElement(u.g,{as:"h3",floated:"right",inverted:!0,style:{cursor:"pointer"},onClick:this.showShareDialog,color:"teal"}," ",r.a.createElement(u.h,{fitted:!0,name:"share"})),this.props.store.readonly.get()?"":r.a.createElement(u.g,{as:"h3",floated:"right",inverted:!0,style:{cursor:"pointer"},onClick:this.savePlayList,color:this.props.store.playlistState.get("changed")?"blue":"green"}," ",r.a.createElement(u.h,{fitted:!0,name:"save"}),this.props.store.playlistState.get("changed")?"Save changes...":""),r.a.createElement(u.m,{size:"tiny",open:this.state.showShareDialog,onClose:this.closeShareDialog},r.a.createElement(u.m.Header,null,"Share your playlist"),r.a.createElement(u.m.Content,null,r.a.createElement(u.i,{ref:"inputcopy",fluid:!0,action:{color:this.state.copied?"green":"teal",labelPosition:"right",icon:"copy",content:this.state.copied?"Copied!":"Copy",onClick:this.onCopy},defaultValue:this.state.code})),r.a.createElement(u.m.Actions,null,r.a.createElement(u.a,{onClick:this.closeShareDialog,negative:!0},"Cancel"))))}}]),t}(r.a.Component))),f=function(){function e(){Object(l.a)(this,e)}return Object(c.a)(e,[{key:"toTimeString",value:function(e){var t,a=0,i=0,n=parseInt(e,10);return this.time_in_seconds>3600&&(a=Math.floor(n/3600),n%=3600),this.time_in_seconds>60&&(i=Math.floor(n/60),n%=60),t=Math.round(n),this.digits(a)+":"+this.digits(i)+":"+this.digits(t)}},{key:"digits",value:function(e){return void 0!==e?e>9?e.toString():"0"+e.toString():""}}]),e}(),v=(a(500),Object(g.b)("store")(Object(g.c)(function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).state={start:a.props.start,end:a.props.end,name:a.props.name,update:a.props.update,showConfirm:!1},a.onStartChange=a.onStartChange.bind(Object(m.a)(a)),a.onEndChange=a.onEndChange.bind(Object(m.a)(a)),a.onNameChange=a.onNameChange.bind(Object(m.a)(a)),a.addClip=a.addClip.bind(Object(m.a)(a)),a.onCancelUdpate=a.onCancelUdpate.bind(Object(m.a)(a)),a.showConfirm=a.showConfirm.bind(Object(m.a)(a)),a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"onStartChange",value:function(e){var t={start:e.target.value,end:parseInt(e.target.value,10)+(parseInt(e.target.value,10)<parseInt(this.props.store.duration.get(),10)?1:0)};this.setState(t)}},{key:"onEndChange",value:function(e){this.setState({end:e.target.value})}},{key:"onNameChange",value:function(e){this.setState({name:e.target.value})}},{key:"addClip",value:function(){var e={name:this.state.name,start:this.state.start,end:this.state.end,main:!1};this.props.update?(e.id=this.props.id,this.props.store.updateClip(e),this.setState({showConfirm:!1})):(this.props.store.addClip(e),this.setState({name:"",start:0,end:0}))}},{key:"showConfirm",value:function(){this.setState({showConfirm:!0})}},{key:"onCancelUdpate",value:function(){this.setState({showConfirm:!1})}},{key:"render",value:function(){var e=new f;return r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement("h5",null,"New Clip"),r.a.createElement(u.i,{placeholder:"Name...",fluid:!0,value:this.state.name,onChange:this.onNameChange}),r.a.createElement("br",null),r.a.createElement(u.i,{fluid:!0,type:"range",onChange:this.onStartChange,value:this.state.start,min:"0",max:Math.round(this.props.store.duration.get())-1}),r.a.createElement(u.j,{color:"black"},r.a.createElement(u.h,{name:"time"})," Start: ",e.toTimeString(this.state.start)),r.a.createElement(u.i,{type:"range",fluid:!0,onChange:this.onEndChange,value:this.state.end,min:this.state.start,max:Math.round(this.props.store.duration.get())}),r.a.createElement(u.j,{color:"black"},r.a.createElement(u.h,{name:"time"})," End:   ",e.toTimeString(this.state.end)),r.a.createElement("hr",null),r.a.createElement("div",null,r.a.createElement(u.a,{disabled:!(""!==this.state.name&&this.state.end>0),onClick:this.props.update?this.showConfirm:this.addClip,primary:!0,fluid:!0},this.state.update?"Update":"Add"))),this.props.update?r.a.createElement(u.c,{open:this.state.showConfirm,onCancel:this.onCancelUdpate,onConfirm:this.addClip}):"")}}]),t}(r.a.Component)))),b=(a(501),Object(g.b)("store")(Object(g.c)(function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).state={start:0,end:0,name:"",showForm:!1},a.toggleForm=a.toggleForm.bind(Object(m.a)(a)),a.playNext=a.playNext.bind(Object(m.a)(a)),a.playPrevious=a.playPrevious.bind(Object(m.a)(a)),a.togglePlayer=a.togglePlayer.bind(Object(m.a)(a)),a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;document.body.onkeypress=function(t){t.ctrlKey&&(10===t.charCode&&e.props.store.playNext(),26===t.charCode&&e.props.store.playPrevious())}}},{key:"togglePlayer",value:function(){this.props.store.requestTogglePlayer()}},{key:"toggleForm",value:function(){this.setState({showForm:!this.state.showForm})}},{key:"playNext",value:function(){this.props.store.playNext()}},{key:"playPrevious",value:function(){this.props.store.playPrevious()}},{key:"render",value:function(){var e=new f;return r.a.createElement(u.b,{fluid:!0,className:"main_video"},r.a.createElement(u.b.Content,null,r.a.createElement(u.b.Meta,null,r.a.createElement(u.f,null,r.a.createElement(u.f.Row,null,r.a.createElement(u.f.Column,null,r.a.createElement(u.n,{inverted:!0},r.a.createElement("p",null,this.props.store.playerState.get("title")||"Main Video")," ",r.a.createElement("p",null,e.toTimeString(this.props.store.playerState.get("current_time")),"/",e.toTimeString(this.props.store.playerState.get("current_duration")||0))))),r.a.createElement(u.f.Row,null,r.a.createElement(u.f.Column,{width:16,textAlign:"center"},r.a.createElement(u.a.Group,{fluid:!0,inverted:!0},r.a.createElement(u.a,{color:"twitter",size:"huge",onClick:this.playPrevious,icon:!0},r.a.createElement(u.h,{name:"chevron left"})),r.a.createElement(u.a,{color:"blue",size:"huge",onClick:this.togglePlayer,icon:!0},r.a.createElement(u.h,{name:this.props.store.playerState.get("playing")?"pause":"video play"})),r.a.createElement(u.a,{color:"twitter",size:"huge",onClick:this.playNext,icon:!0},r.a.createElement(u.h,{name:"chevron right"}))))),this.props.store.readonly.get()?"":r.a.createElement(u.f.Row,null,r.a.createElement(u.f.Column,{width:16},r.a.createElement(u.a,{icon:!0,color:this.state.showForm?"orange":"green",onClick:this.toggleForm,size:"mini",floated:"right",labelPosition:"right"},this.state.showForm?"Hide Form":"Add Clip",r.a.createElement(u.h,{name:this.state.showForm?"up arrow":"add"}))))))),r.a.createElement(u.b.Content,{extra:!0},r.a.createElement(u.n,{style:{display:this.state.showForm?"block":"none"}},r.a.createElement(v,Object.assign({},this.state,{update:!1})))))}}]),t}(r.a.Component)))),C=(a(502),Object(g.b)("store")(Object(g.c)(function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).state={editing:!1,showDeleteConfirmDialog:!1},a.onItemClick=a.onItemClick.bind(Object(m.a)(a)),a.onDeleteClick=a.onDeleteClick.bind(Object(m.a)(a)),a.toggleEditing=a.toggleEditing.bind(Object(m.a)(a)),a.showDeleteConfirmDialog=a.showDeleteConfirmDialog.bind(Object(m.a)(a)),a.onCancelDeleteDialog=a.onCancelDeleteDialog.bind(Object(m.a)(a)),a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"onItemClick",value:function(){this.props.index===this.props.store.playerState.get("current_clip_index")?this.props.store.requestTogglePlayer():this.props.store.playClip(this.props.index)}},{key:"onDeleteClick",value:function(){var e=this,t=this.props.store.clips.filter(function(t){return e.props.id===t.id})[0];this.props.store.removeClip(t),this.setState({showDeleteConfirmDialog:!1})}},{key:"showDeleteConfirmDialog",value:function(){this.setState({showDeleteConfirmDialog:!0})}},{key:"onCancelDeleteDialog",value:function(){this.setState({showDeleteConfirmDialog:!1})}},{key:"toggleEditing",value:function(){this.setState({editing:!this.state.editing})}},{key:"render",value:function(){var e=new f,t=this.props.as;return r.a.createElement(t,{className:"item-clip "+(this.props.index===this.props.store.playerState.get("current_clip_index")?"playing":"")},r.a.createElement(u.h,{name:this.props.store.playerState.get("playing")&&this.props.store.playerState.get("current_clip_index")===this.props.index?"pause":"play",className:"action_icon",onClick:this.onItemClick}),r.a.createElement(u.k.Content,null,r.a.createElement(u.k.Header,null,this.props.name),this.props.readonly?"":r.a.createElement(u.k.Description,{as:"div",className:"clip-description"},r.a.createElement(u.f,null,r.a.createElement(u.f.Column,{width:6},r.a.createElement("b",null,"Start:\xa0"),e.toTimeString(this.props.start)),r.a.createElement(u.f.Column,{width:6},r.a.createElement("b",null,"End:\xa0"),e.toTimeString(this.props.end)),this.props.store.readonly.get()?"":r.a.createElement(u.f.Column,{width:2},this.props.playing||this.props.main?"":r.a.createElement(u.h,{name:this.state.editing?"checkmark":"edit",onClick:this.toggleEditing,className:"action_icon",size:"big",color:"blue"})),this.props.store.readonly.get()?"":r.a.createElement(u.f.Column,{width:2},this.props.playing||this.state.editing||this.props.main?"":r.a.createElement(u.h,{name:"remove",onClick:this.showDeleteConfirmDialog,className:"action_icon",size:"big",color:"red"}))),this.props.store.readonly.get()?"":r.a.createElement(u.f,null,r.a.createElement(u.f.Column,{width:16},!this.state.editing||this.props.playing||this.props.main?"":r.a.createElement(v,{id:this.props.id,name:this.props.name,start:this.props.start,end:this.props.end,update:!0}))))),r.a.createElement(u.c,{open:this.state.showDeleteConfirmDialog,onCancel:this.onCancelDeleteDialog,onConfirm:this.onDeleteClick}))}}]),t}(r.a.Component)))),S=Object(g.b)("store")(Object(g.c)(function(e){function t(){return Object(l.a)(this,t),Object(p.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.props.playlist&&this.props.playlist.map(function(t){return e.props.store.addClip(t),t})}},{key:"render",value:function(){var e=this;return r.a.createElement(u.o.Group,{as:u.k,duration:200,divided:!0,color:"white",size:"large",verticalAlign:"middle"},this.props.store.clips.map(function(t,a){return r.a.createElement(C,Object.assign({as:u.k.Item,key:a,index:a},t,{readonly:e.props.readonly}))}))}}]),t}(r.a.Component))),E=function(e){function t(){return Object(l.a)(this,t),Object(p.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement(u.n,null,r.a.createElement(b,null),r.a.createElement(S,{readonly:!1}))}}]),t}(r.a.Component),O=Object(g.b)("store")(Object(g.c)(function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).onVideoLoaded=a.onVideoLoaded.bind(Object(m.a)(a)),a.state={firstLoad:!0,paused:!0},a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"onVideoLoaded",value:function(){var e=this,t=this.props.store.playerState;this.state.firstLoad&&(this.props.store.setPlayerProperties(this.refs.video),this.refs.video.addEventListener("pause",function(){var a=t.get("current_clip_index"),i=e.props.store.clips[a];parseInt(t.get("current_time"),10)+parseInt(i.start,10)===parseInt(i.end,10)?(e.props.store.videoLoadingStarted(),setTimeout(function(){e.props.store.playNext()},3e3)):e.props.store.playerState.set("playing",!1)},!1),this.refs.video.addEventListener("play",function(){e.props.store.playerState.set("playing",!0)},!1),this.refs.video.addEventListener("loadstart",function(){e.props.store.videoLoadingStarted()}),this.refs.video.addEventListener("timeupdate",function(t){e.props.store.updatePlayerCurrentTime(t.target.currentTime)},!1),this.refs.video.addEventListener("loadeddata",function(){e.props.store.videoLoadingFinished()}),this.setState({firstLoad:!1}))}},{key:"componentWillUpdate",value:function(e,t){this.props.store.playerState.get("toggle_requested")&&(this.state.paused?(this.refs.video.play(),this.setState({paused:!1})):(this.refs.video.pause(),this.setState({paused:!0})),this.props.store.playerState.set("toggle_requested",!1)),this.props.store.playerState.get("new_play_requested")&&(this.refs.video.load(),this.refs.video.play(),this.setState({paused:!1}),this.props.store.playerState.set("new_play_requested",!1))}},{key:"render",value:function(){var e=this.props.store.clips[this.props.store.playerState.get("current_clip_index")],t=0,a=this.props.store.duration.get();void 0!==e&&(t=e.start,a=e.end);var i=this.props.store.playerState.get("loading")||this.props.store.playerState.get("new_play_requested")||this.props.store.playerState.get("toggle_requested");return r.a.createElement(u.n,{inverted:!0},i?r.a.createElement(u.e,{active:!0},r.a.createElement(u.l,{size:"tiny"},"Loading")):"",r.a.createElement("video",{style:{visibility:i?"hidden":"visible"},controls:!0,ref:"video",onLoadedMetadata:this.onVideoLoaded,preload:"metadata",width:"100%"},r.a.createElement("source",{src:this.props.url+"#t="+(t||0)+","+(a||""),type:'video/mp4;codecs="avc1.42E01E, mp4a.40.2"'})))}}]),t}(r.a.Component))),j=(a(503),a(13)),k=new(function(){function e(){var t=this;Object(l.a)(this,e),this.next_sent=!1,this.playerState=j.h.map(),this.playerState.set("playing",!1),this.playerState.set("toggle_requested",!1),this.playerState.set("new_play_requested",!1),this.playerState.set("loading",!1),this.playerState.set("title",!1),this.playerState.set("current_duration",0),this.playerState.set("current_time",0),this.playerState.set("current_clip_index",0),this.readonly=Object(j.h)(!1),this.playlistState=j.h.map(),this.playlistState.set("changed",!1),this.clips=Object(j.h)(JSON.parse(localStorage.getItem("playlist"))||[]),this.video=Object(j.h)({}),this.videoloading=Object(j.h)(!1),this.duration=Object(j.h)(0),this.playClip=Object(j.c)(this.playClip),this.playPrevious=Object(j.c)(this.playPrevious),this.playNext=Object(j.c)(this.playNext),this.setPlayerProperties=Object(j.c)(this.setPlayerProperties),this.videoLoadingStarted=Object(j.c)(this.videoLoadingStarted),this.videoLoadingFinished=Object(j.c)(this.videoLoadingFinished),this.updatePlayerCurrentTime=Object(j.c)(this.updatePlayerCurrentTime),this.requestTogglePlayer=Object(j.c)(this.requestTogglePlayer),this.addClip=Object(j.c)(this.addClip),this.removeClip=Object(j.c)(this.removeClip),this.updateClip=Object(j.c)(this.updateClip),this.savePlayList=Object(j.c)(this.savePlayList),this.playListChanged=this.playListChanged.bind(this),this.playListChanged=Object(j.i)(function(){return t.clips.map(function(e){return e.name})},this.playListChanged)}return Object(c.a)(e,[{key:"addClip",value:function(e){e.playing=!1,e.id=Date.now(),e.main=!1,this.clips.push(e)}},{key:"updateClip",value:function(e){e.playing=!1,this.clips.replace(this.clips.map(function(t){return t.id===e.id?e:t}))}},{key:"removeClip",value:function(e){this.clips.remove(e)}},{key:"savePlayList",value:function(){localStorage.setItem("playlist",JSON.stringify(this.clips.toJS())),this.playlistState.set("changed",!1)}},{key:"playListChanged",value:function(){this.playlistState.set("changed",!0)}},{key:"setPlayerProperties",value:function(e){this.video=e,this.playerState.set("current_duration",e.duration),this.duration.set(e.duration),this.clips.length<1&&this.clips.push({name:"Main Video",start:0,end:e.duration,main:!0,playing:!1})}},{key:"playClip",value:function(e){var t=this;this.clips.map(function(a,i){return e===i?(t.playerState.set("current_clip_index",i),t.playerState.set("title",a.name),t.playerState.set("current_duration",a.end-a.start),t.playerState.set("current_time",0),t.playerState.set("new_play_requested",!0),a.playing=!0):a.playing=!1,a})}},{key:"playPrevious",value:function(){var e=this.playerState.get("current_clip_index")-1;e>=0?this.playClip(e):this.playClip(this.clips.length-1)}},{key:"playNext",value:function(){var e=this.clips.length,t=this.playerState.get("current_clip_index")+1;t<e?this.playClip(t):this.playClip(0)}},{key:"videoLoadingStarted",value:function(){this.playerState.get("loading")||this.playerState.set("loading",!0)}},{key:"videoLoadingFinished",value:function(){this.playerState.set("loading",!1)}},{key:"updatePlayerCurrentTime",value:function(e){var t=this.clips[this.playerState.get("current_clip_index")].start;e-t>0?this.playerState.set("current_time",e-t):this.playerState.set("current_time",0)}},{key:"requestTogglePlayer",value:function(){this.playerState.set("toggle_requested",!0)}},{key:"setReadOnly",value:function(){this.readonly.set(!0)}},{key:"setPlayList",value:function(e){this.clips.replace(e.map(function(e){return e}))}}]),e}()),w=function(e){function t(){return Object(l.a)(this,t),Object(p.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentWillMount",value:function(){this.props.readonly&&(k.setReadOnly(),this.props.playlist.length>0&&k.setPlayList(this.props.playlist))}},{key:"render",value:function(){return r.a.createElement(g.a,{store:k},r.a.createElement(u.d,{fluid:!0,className:"App"},r.a.createElement(y,{url:this.props.url}),r.a.createElement(u.f,{divided:"vertically"},r.a.createElement(u.f.Column,{mobile:16,widescreen:12,largeScreen:10,computer:10,tablet:16},r.a.createElement(O,{url:this.props.url})),r.a.createElement(u.f.Column,{mobile:16,widescreen:4,largeScreen:6,computer:6,tablet:16},r.a.createElement(E,null)))))}}]),t}(n.Component),_=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function D(e){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}}).catch(function(e){console.error("Error during service worker registration:",e)})}if(document.getElementById("react-clipper")){var P=(i=document.getElementById("react-clipper")).getAttribute("video-url"),L=!1,x=[];i.getAttribute("readonly")&&(L=!0),L&&i.getAttribute("data-playlist")&&(x=JSON.parse(i.getAttribute("data-playlist"))),o.a.render(r.a.createElement(w,{url:P,readonly:L,playlist:x}),document.getElementById("react-clipper")),function(){if("serviceWorker"in navigator){if(new URL("/clipapp",window.location).origin!==window.location.origin)return;window.addEventListener("load",function(){var e="".concat("/clipapp","/service-worker.js");_?(!function(e){fetch(e).then(function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):D(e)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://goo.gl/SC7cgQ")})):D(e)})}}()}}},[[282,1,2]]]);
//# sourceMappingURL=main.2a644cfa.chunk.js.map